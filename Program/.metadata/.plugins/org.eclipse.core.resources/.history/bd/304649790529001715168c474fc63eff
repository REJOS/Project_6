/*
 * memorysystem.h
 *
 *  Created on: Apr 17, 2017
 *      Author: john
 */

#ifndef MEMORYSYSTEM_H_
#define MEMORYSYSTEM_H_

#define TLB_SIZE 16
#define PAGE_MASK 0b00000000000000001111111100000000
#define OFFSET_MASK 0b00000000000000000000000011111111
#define PAGE_SHIFT 8

typedef unsigned int u_int_t;

typedef struct {
	u_int_t page;
	u_int_t frame;
	u_int_t age;
	//bool valid;
} tlb_entry_t;

typedef struct {
	tlb_entry_t list[TLB_SIZE];
	u_int_t size;
	//u_int_t rem_next;
} tlb_t;

typedef struct {

} page_table_t;

u_int_t ParsePageNum(u_int_t logical_addr);
u_int_t ParseOffset(u_int_t logical_addr);
int CreateTLB();
int Search_TLB(u_int_t page_num, tlb_t tlb, bool *is_tlb_hit, u_int_t *frame_num);
int page_fault_handler(page_num, *physical_memory,  *page_table, tlb_t *tlb);



#endif /* MEMORYSYSTEM_H_ */
